<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Connection analysis Papiermühle [8507096] → Jegenstorf [8508059] (any line) (excluding pass-through) – Report</title>
  <script src="https://cdn.plot.ly/plotly-2.30.0.min.js"></script>

  <style>
  :root{
    --fg:#1f2937; --muted:#6b7280; --card:#ffffff; --bg:#f8fafc; --accent:#0ea5e9;
    --space-1:.5rem; --space-2:.8rem; --space-3:1.2rem; --radius:12px;
  }
  *{box-sizing:border-box}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg); color:var(--fg); margin:0; padding:2rem;}
  .report{max-width:1500px;margin:0 auto;background:var(--card);border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.06);}
  h1{margin:.2rem 0 1rem;font-size:clamp(1.6rem,1.2rem + 1.2vw,2.1rem)}
  h2{margin:1.6rem 0 .8rem;font-size:clamp(1.1rem,.9rem + .6vw,1.35rem)}
  h3{margin:1.2rem 0 .6rem;font-size:clamp(1.0rem,.9rem + .3vw,1.1rem)}
  .meta{color:var(--muted);font-size:.9rem;margin-bottom:1rem;font-variant-numeric:tabular-nums}
  .small{font-size:.9rem;color:var(--muted);font-variant-numeric:tabular-nums}

  /* Responsive grids */
  .kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin:.8rem 0 1.2rem}
  .row{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:14px; align-items:start}
  .row-2{display:grid;grid-template-columns:repeat(auto-fit,minmax(420px,1fr));gap:14px}
  .row-3{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}

  .card{background:#fff;border:1px solid #eef2f7;border-radius:var(--radius);padding:14px;min-height:100%; overflow:hidden;}
  .card.allow-overflow{ overflow:visible }
  .card > h3{margin:.2rem 0 .6rem}
  .card[data-compact="true"]{padding:10px}

  img{max-width:100%;height:auto;border-radius:8px;border:1px solid #eef2f7}

  /* Tables */
  .table{width:100%;border-collapse:collapse;font-size:.92rem}
  .table th,.table td{padding:.5rem .6rem;border-bottom:1px solid #eef2f7;text-align:left}
  .table th{position:sticky;top:0;background:var(--card);z-index:1}
  .table td:nth-child(2), .table td:nth-child(3){text-align:right;font-variant-numeric:tabular-nums}

  hr{border:none;border-top:1px solid #eef2f7;margin:1.2rem 0}
  .link-card{display:flex;justify-content:space-between;align-items:center;padding:12px;border:1px solid #eef2f7;border-radius:10px;background:#fafcff}
  .link-card a{color:var(--accent);text-decoration:none;font-weight:600}
  .footer{color:var(--muted);font-size:.8rem;margin-top:1rem}
  details{border:1px solid #eef2f7;border-radius:12px;background:#fff;margin:12px 0}
  summary{cursor:pointer;list-style:none;padding:12px 14px;font-weight:600}
  summary::-webkit-details-marker{display:none}
  details > .content{padding:14px;border-top:1px solid #eef2f7}
  .placeholder{user-select:none}
  .badge{display:inline-block;background:#eef6ff;color:#0b6fb5;border:1px solid #cfe8ff;padding:.2rem .5rem;border-radius:999px;font-size:.8rem}

  /* Key-value grid */
  .kv{display:grid;grid-template-columns:1fr auto;gap:.25rem .8rem;align-items:baseline;margin:.2rem 0 1rem}
  .kv .k{color:var(--muted)}
  .kv .v{font-weight:600}

  /* Plotly responsiveness and sizing helpers */
  .plotly, .js-plotly-plot{width:100% !important; height:auto}
  .chart-square{ aspect-ratio:1/1; min-height:420px; width:100% }
  .chart-43{ aspect-ratio:4/3; min-height:320px; width:100% }
  .chart-square .js-plotly-plot,
  .chart-square .plotly,
  .chart-43 .js-plotly-plot,
  .chart-43 .plotly{ height:100% !important; width:100% !important; display:block }

  /* Distance charts */
  .chart-distance-main{ min-height:420px; width:100% }
  .chart-distance-compact{ min-height:300px; width:100% }

  /* Filter bar */
  .filters{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;align-items:end;margin:.6rem 0 1rem}
  .filters label{font-size:.85rem;color:var(--muted);display:block;margin-bottom:.25rem}
  .filters input[type="checkbox"]{transform:translateY(1px)}
  .filters .inline{display:flex;align-items:center;gap:.5rem}
  .filters select,.filters button{width:100%;padding:.55rem .6rem;border:1px solid #e5e7eb;border-radius:10px;background:#fff;font-weight:600}
  .filters button{background:var(--accent);color:#fff;cursor:pointer}
  .filters .hint{font-size:.8rem;color:var(--muted)}

  /* Dark mode */
  @media (prefers-color-scheme: dark){
    :root{ --fg:#e5e7eb; --muted:#94a3b8; --card:#0b1220; --bg:#0a0f1a; --accent:#38bdf8 }
    body{background:var(--bg); color:var(--fg)}
    .card, details{background:var(--card); border-color:#1f2937}
    .table th,.table td{border-bottom:1px solid #1f2937}
    img{border-color:#1f2937}
    .link-card{background:#0f172a; border-color:#1f2937}
  }

  @media (prefers-reduced-motion: reduce){ *{scroll-behavior:auto} }

  @media print{
    body{background:#fff; padding:0; color:#000}
    .report{box-shadow:none; border-radius:0; max-width:none; padding:0}
    .filters{display:none}
    details{border:none}
    details[open] > .content{padding:0}
    .card{break-inside:avoid}
    a[href^="http"]:after{content:" (" attr(href) ")"; font-size:.85em}
  }
  /* ——— Nicer filter UI ——— */
/* Filter card layout */
.filter-card{
  margin:0 0 12px;
  background:var(--card);
  border:1px solid #eef2f7;
  border-radius:var(--radius);
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:14px;
}
.filter-card h3{margin:0 0 4px}

/* Row containers */
.filter-row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
.filter-row.middle{flex-wrap:wrap}
.filter-row.middle .fctl{flex:1 1 220px}
.filter-row.bottom{flex-direction:column;align-items:flex-start;gap:.35rem}

/* Inputs */
.fctl label{display:block;margin:0 0 .35rem;font-size:.9rem;color:var(--fg)}
.fctl .muted{color:var(--muted);font-weight:400}
.fctl .req{color:var(--accent);font-weight:600}
.fctl select{width:100%;padding:.6rem .7rem;border:1px solid #e5e7eb;border-radius:10px;background:#fff;font-weight:600}
.filter-row.bottom button{
  width:100%;padding:.8rem 1rem;
  border:none;border-radius:12px;
  background:var(--accent);color:#fff;
  font-weight:700;cursor:pointer;
}
.filter-row.bottom button[disabled]{opacity:.6;cursor:not-allowed}
.small.error{color:#b91c1c}

/* Segmented toggle */
.seg-toggle{display:inline-grid;grid-auto-flow:column;border:1px solid #e5e7eb;border-radius:999px;overflow:hidden}
.seg-toggle input{position:absolute;opacity:0;pointer-events:none}
.seg-toggle label{padding:.45rem .9rem;font-weight:700;cursor:pointer;background:#f9fafb}
.seg-toggle input:checked + label{background:var(--accent);color:#fff}

/* Pass-through switch */
.switch{display:inline-flex;align-items:center;gap:.6rem;cursor:pointer;user-select:none}
.switch input{position:absolute;opacity:0;width:0;height:0}
.switch .slider{position:relative;width:46px;height:28px;border-radius:999px;background:#e5e7eb;transition:.2s;display:inline-block}
.switch .slider::after{content:'';position:absolute;top:3px;left:3px;width:22px;height:22px;border-radius:50%;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.15);transition:.2s}
.switch input:checked + .slider{background:var(--accent)}
.switch input:checked + .slider::after{transform:translateX(18px)}
.switch .switch-label{font-weight:600;color:var(--fg);font-size:.9rem}

/* Dark mode tweaks */
@media (prefers-color-scheme: dark){
  .filter-card{border-color:#1f2937}
  .fctl select{background:var(--card);border-color:#1f2937;color:var(--fg)}
  .seg-toggle{border-color:#1f2937}
  .seg-toggle label{background:#0f172a}
  .switch .slider{background:#334155}
}



  </style>
</head>

<body>
<div class="report">

  <div class="meta">Erstellt am 2025-09-25 16:44</div>
  <h1>Connection analysis Papiermühle [8507096] → Jegenstorf [8508059] (any line) (excluding pass-through) – Report</h1>

  
  
  

  
  

  

  

  

  

  

  

  
  

  

  
      
  <h2>Übersicht</h2>
    <div class="row">
    
      <div class="card" >
      <h3>Lage</h3>
      
      <div class="placeholder" style="height:360px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Karte
    </div>
    
    </div>

    <div class="card" >
      <h3>Schlüsseldaten</h3>
      <div class="placeholder" style="height:420px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Schlüsseldaten
    </div>
    </div>
    </div>
    <div class="row">
    
    <div class="card" >
      <h3>Schlüsseldaten</h3>
      <div class="placeholder" style="height:420px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Schlüsseldaten
    </div>
    </div>
    <div class="card" >
      <h3>Schlüsseldaten</h3>
      <div class="placeholder" style="height:420px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Schlüsseldaten
    </div>
    </div>

    </div>
  <h2>Jetzige Nutzung</h2>
  <div class="row">
      <div class="card" >
      <h3>ÖV Nachfrage</h3>
      
      <div class="placeholder" style="height:360px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Karte
    </div>
    
    </div>
    </div>
<div class="row">
  <div class="card" >
      <h3>Top ÖV-Verkehr Gemeinde Paare</h3>
      
      <div class="placeholder" style="height:200px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Top ÖV-Verkehr Gemeinde Paare – Keine Daten
    </div>
    
    </div>
  <div class="card" >
      <h3>Top ÖV-Verkehr Gemeinden</h3>
      
      <div class="placeholder" style="height:200px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Top ÖV-Verkehr Gemeinden – Keine Daten
    </div>
    
    </div>
</div>

<div class="row">
  <div class="card" >
      <h3>Top Linien</h3>
      
      <div class="placeholder" style="height:200px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Top Linien – Keine Daten
    </div>
    
    </div>
  <div class="card" >
      <h3>Top Haltestellen</h3>
      
      <div class="placeholder" style="height:200px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Top Haltestellen – Keine Daten
    </div>
    
    </div>
</div>

  <h2>ÖV Qualität</h2>
  <div class="row">
      <div class="card" >
      <h3>Verhältnis ÖV Fahrzeit vs MIV Fahrzeit</h3>
      
      <div class="placeholder" style="height:360px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Karte
    </div>
    
    </div>
    </div>
  <h2>ÖV Potenzial</h2>
  <div class="card" >
      <h3>???</h3>
      <div class="placeholder" style="height:420px;display:flex;align-items:center;justify-content:center;
    background:repeating-linear-gradient(45deg,#f3f6fb,#f3f6fb 10px,#eef2f7 10px,#eef2f7 20px);
    border:1px dashed #cfd8e3;border-radius:12px;font-weight:600;color:#64748b">
      Inhalt (Placeholder)
    </div>
    </div>

    <h2>Daten</h2>
    <div class="card">
      <div class="small">
        <p>Die Analyse beruht auf den folgenden Datensätzen. Soweit nicht anders angegeben, beziehen sich alle Analysen im Dashboard auf die hier pro Datensatz aufgeführten Zeiträume.</p>
        <p><strong>42hacks Routing Algorithmus</strong> berechnet wahrscheinliche MIV- und ÖV-Reiserouten basierend auf Quell-Ziel-Nachfragematrizen. <strong>Version:</strong> 2025</p>
        <p><strong>Swisscom Quell-Ziel-Daten</strong> … <strong>Datensatz:</strong> Gemittelter Werktag, 2023</p>
        <p><strong>Google Environmental Insights Explorer (EIE) – Transport</strong> … <strong>Version:</strong> 2023</p>
      </div>
    </div>

    <hr>
    <div class="footer">
      <span class="small">Hinweis: Karten sind als separate HTML-Dateien eingebettet.</span>
    </div>
  

</div>
<script>
(function(){
  // Lazy-load iframes when visible (works for maps inside subreports too)
  function loadIframe(iframe){
    if (!iframe || iframe.__loaded) return;
    var real = iframe.getAttribute('data-src');
    if (!real) return;
    iframe.src = real;
    iframe.__loaded = true;
  }
  var io = 'IntersectionObserver' in window ? new IntersectionObserver(function(entries){
    entries.forEach(function(e){ if(e.isIntersecting) loadIframe(e.target); });
  }, {rootMargin: '200px'}) : null;

  function observeIframes(root){
    var scope = root || document;
    var iframes = scope.querySelectorAll('iframe[data-src]');
    iframes.forEach(function(iframe){
      if (io) io.observe(iframe); else loadIframe(iframe);
      var details = iframe.closest('details');
      if (details) {
        details.addEventListener('toggle', function(){
          if (details.open) {
            loadIframe(iframe);
            try {
              iframe.contentWindow && iframe.contentWindow.dispatchEvent(new Event('resize'));
              setTimeout(function(){ iframe.contentWindow && iframe.contentWindow.dispatchEvent(new Event('resize')); }, 150);
            } catch(e) {}
          }
        });
      }
    });
  }

  // Plotly helpers
  function markPlotlyCards(root){
    var scope = root || document;
    var charts = scope.querySelectorAll('.js-plotly-plot');
    charts.forEach(function(el){
      var card = el.closest('.card');
      if (card) card.classList.add('allow-overflow');
    });
  }
  function resizePlotlyCharts(root){
    var scope = root || document;
    var els = scope.querySelectorAll('.js-plotly-plot');
    els.forEach(function(el){
      try { window.Plotly && Plotly.Plots && Plotly.Plots.resize(el); } catch(e){}
    });
  }

  function onReady(){
    try { console.info('[DEBUG] onReady, mode=subreport'); } catch(e) {}
    observeIframes();
    markPlotlyCards();
    resizePlotlyCharts();
    setTimeout(resizePlotlyCharts, 150);
  }
  if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', onReady); else onReady();

  
})();
</script>

</body>
</html>